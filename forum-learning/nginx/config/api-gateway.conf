upstream api-gateway-host {
  server        api_gateway:8080;
}

server {
  listen 443 ssl;
  server_name wildangbudhi.com;
  
  include snippets/ssl.conf;

  location /api {
    proxy_pass  http://api-gateway-host;
  }
}

server {
  listen 80;
  server_name wildangbudhi.com;

  include snippets/certbot.conf;

  location /api {
    return 301 https://$host$request_uri;
  }
}